let pokemonRepository = function () { let t = [], e = "https://pokeapi.co/api/v2/pokemon/?limit=150"; function n(e) { t.push(e) } function o(t) { a(t).then(function () { i(t) }) } function a(t) { let e = t.detailsUrl; return fetch(e).then(function (t) { return t.json() }).then(function (e) { t.defaultImageUrl = e.sprites.front_default, t.shinyImageUrl = e.sprites.front_shiny, t.height = e.height, t.types = e.types }).catch(function (t) { console.log(t) }) } function i(t) { let e = $(".modal-body"), n = $(".modal-title"), o = t.types.map(function (t) { return t.type.name }); n.empty(), e.empty(); let a = $("<h1>" + t.name + "</h1>"), i = $("<img>"); i.attr("src", t.defaultImageUrl); let l = $("<img>"); l.attr("src", t.shinyImageUrl); let r = $("<p>Height: " + t.height + "</p>"), s = document.createElement("p"); s.innerText = "Type(s): " + o, n.append(a), e.append(i), e.append(l), e.append(r), e.append(s) } let l = document.querySelector("#searchBar"); return l.addEventListener("input", () => { const t = document.querySelector(".pokemon-list"), e = l.value.toUpperCase(), n = t.getElementsByTagName("li"); for (let t = 0; t < n.length; t++) { const o = n[t].getElementsByTagName("button")[0]; (o.textContent || o.innerText).toUpperCase().indexOf(e) > -1 ? n[t].style.display = "" : n[t].style.display = "none" } }), { add: n, getAll: function () { return t }, addListItem: function (t) { let e = document.querySelector(".pokemon-list"), n = document.createElement("li"), a = document.createElement("button"); a.innerText = t.name, a.classList.add("button-close"), a.classList.add("btn", "button-class"), a.setAttribute("data-toggle", "modal"), a.setAttribute("data-target", "#modal-container"), n.classList.add("list-group-item", "border-0"), n.appendChild(a), e.appendChild(n), a.addEventListener("click", function () { o(t) }) }, loadList: function () { return fetch(e).then(function (t) { return t.json() }).then(function (t) { t.results.forEach(function (t) { n({ name: t.name, detailsUrl: t.url }) }) }).catch(function (t) { console.error(t) }) }, loadDetails: a, showDetails: o, showModal: i } }(); pokemonRepository.loadList().then(function () { pokemonRepository.getAll().forEach(function (t) { pokemonRepository.addListItem(t) }) });